---
import { Image } from 'astro:assets';
import { fetchAPI } from '../../lib/strapi';
import { getUrlImage } from '../../lib/utils';
import type { FooterStrapi } from '../../types';

const footerData: FooterStrapi = await fetchAPI(
  'footer',
  {
    populate: {
      ChurchInfo: {
        populate: '*',
      },
      Location: {
        populate: '*',
      },
      ContactInfo: {
        populate: '*',
      },
      SocialLink: {
        populate: '*',
      },
    },
  },
  'data',
);
---

<footer
  class="bg-white max-w-7xl mx-auto w-full px-4 md:px-20 lg:px-40 py-12 border-t border-gray-200"
>
  <div
    class="flex flex-col md:grid md:grid-cols-4 justify-between items-start gap-6 md:gap-12"
  >
    <div class="flex flex-col gap-4">
      <div class="flex items-center">
        <h4 class="font-bold text-lg">
          {footerData?.ChurchInfo?.title || 'Sagrada familia de Fusagasug치'}
        </h4>
      </div>
      <p class="text-sm text-primary-text">
        {
          footerData?.ChurchInfo?.description ||
            'La Parroquia Sagrada Familia de Fusagasug치 es una comunidad cat칩lica comprometida con la fe, la solidaridad y el servicio a Dios y al pr칩jimo.'
        }
      </p>
    </div>
    <div class="flex flex-col gap-4">
      <h5 class="font-bold text-xs uppercase tracking-widest">Ubicacion</h5>
      <div class="flex gap-2">
        <svg
          viewBox="0 0 24 24"
          class="size-4"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
            <path
              d="M12 21C15.5 17.4 19 14.1764 19 10.2C19 6.22355 15.866 3 12 3C8.13401 3 5 6.22355 5 10.2C5 14.1764 8.5 17.4 12 21Z"
              stroke="#4B5E9A"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
            <path
              d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z"
              stroke="#4B5E9A"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
          </g></svg
        >
        <div class="text-xs text-primary-text">
          <p>{footerData?.Location?.address || 'Carrera 6 # 7-42'}</p>
          <p>
            {footerData?.Location?.city || 'Fusagasuga'}, {
              footerData?.Location?.state || 'Cundinamarca'
            }
          </p>
        </div>
      </div>
      <div class="flex gap-2 mt-4">
        <svg
          viewBox="0 0 24 24"
          class="size-4"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
            <path
              d="M12 6H12.01M9 20L3 17V4L5 5M9 20L15 17M9 20V14M15 17L21 20V7L19 6M15 17V14M15 6.2C15 7.96731 13.5 9.4 12 11C10.5 9.4 9 7.96731 9 6.2C9 4.43269 10.3431 3 12 3C13.6569 3 15 4.43269 15 6.2Z"
              stroke="#4B5E9A"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"></path>
          </g></svg
        >
        {
          (footerData?.Location?.mapUrl && (
            <a
              class="text-sm text-primary"
              href={footerData?.Location?.mapUrl.link || '#'}
            >
              {footerData?.Location?.mapUrl.text || 'Ver Mapa'}
            </a>
          )) || <span class="text-sm text-primary">Ver en mapa</span>
        }
      </div>
    </div>
    <div class="flex flex-col gap-4">
      <h5 class="font-bold text-xs uppercase tracking-widest">Contacto</h5>
      <div class="flex items-center gap-2">
        <div class="size-4">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
              <path
                d="M3 5.5C3 14.0604 9.93959 21 18.5 21C18.8862 21 19.2691 20.9859 19.6483 20.9581C20.0834 20.9262 20.3009 20.9103 20.499 20.7963C20.663 20.7019 20.8185 20.5345 20.9007 20.364C21 20.1582 21 19.9181 21 19.438V16.6207C21 16.2169 21 16.015 20.9335 15.842C20.8749 15.6891 20.7795 15.553 20.6559 15.4456C20.516 15.324 20.3262 15.255 19.9468 15.117L16.74 13.9509C16.2985 13.7904 16.0777 13.7101 15.8683 13.7237C15.6836 13.7357 15.5059 13.7988 15.3549 13.9058C15.1837 14.0271 15.0629 14.2285 14.8212 14.6314L14 16C11.3501 14.7999 9.2019 12.6489 8 10L9.36863 9.17882C9.77145 8.93713 9.97286 8.81628 10.0942 8.64506C10.2012 8.49408 10.2643 8.31637 10.2763 8.1317C10.2899 7.92227 10.2096 7.70153 10.0491 7.26005L8.88299 4.05321C8.745 3.67376 8.67601 3.48403 8.55442 3.3441C8.44701 3.22049 8.31089 3.12515 8.15802 3.06645C7.98496 3 7.78308 3 7.37932 3H4.56201C4.08188 3 3.84181 3 3.63598 3.09925C3.4655 3.18146 3.29814 3.33701 3.2037 3.50103C3.08968 3.69907 3.07375 3.91662 3.04189 4.35173C3.01413 4.73086 3 5.11378 3 5.5Z"
                stroke="#4B5E9A"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </g></svg
          >
        </div>
        <h5 class="text-sm text-primary-text">
          {footerData?.ContactInfo?.phone.text || '+57 (601) 867-0000'}
        </h5>
      </div>
      <div class="flex gap-2 items-center">
        <div class="size-4">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
              <path
                d="M7 9H17M7 13H17M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z"
                stroke="#4B5E9A"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </g></svg
          >
        </div>
        <h5 class="text-sm text-primary-text">
          {footerData?.ContactInfo?.whatsapp.text || '+57 (601) 867-0000'} (WhatsApp)
        </h5>
      </div>
      <div class="flex gap-2 items-center">
        <div class="size-4">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
              id="SVGRepo_tracerCarrier"
              stroke-linecap="round"
              stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier">
              <path
                d="M14.53 15.3104L13.7737 14.7796C13.1322 14.352 12.8114 14.1381 12.4647 14.055C12.1584 13.9816 11.839 13.9816 11.5326 14.055C11.1859 14.1381 10.8651 14.352 10.2236 14.7796L9.46751 15.3105M14.53 15.3104L20.5 19.5M14.53 15.3104L20.97 11M3.5 19.5L9.46751 15.3105M9.46751 15.3105L3.02734 11M6 13V5.99997H18V13M10.5 9.99997L9.5 9.49997M13.5 9.99997L14.5 9.49997M8.89078 4.64353L4.69079 8.21452C4.069 8.74318 3.75811 9.00751 3.53474 9.32962C3.33681 9.61505 3.18996 9.93268 3.10071 10.2684C3 10.6472 3 11.0553 3 11.8714V16.2C3 17.8801 3 18.7202 3.32698 19.3619C3.6146 19.9264 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9264 20.673 19.3619C21 18.7202 21 17.8801 21 16.2V11.8714C21 11.0552 21 10.6472 20.8993 10.2684C20.81 9.93268 20.6632 9.61505 20.4653 9.32962C20.2419 9.00751 19.931 8.74318 19.3092 8.21451L15.1092 4.64353C14.0049 3.70463 13.4528 3.23518 12.8344 3.05612C12.2893 2.89829 11.7107 2.89829 11.1656 3.05612C10.5472 3.23518 9.99507 3.70463 8.89078 4.64353Z"
                stroke="#4B5E9A"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </g></svg
          >
        </div>
        <h5 class="text-sm text-primary-text">
          {footerData?.ContactInfo?.email || 'tikand24@gmail.com'}
        </h5>
      </div>
    </div>
    <div class="flex flex-col gap-4">
      <h5 class="font-bold text-xs uppercase tracking-widest">Siguenos</h5>
      <div class="flex gap-4">
        {
          footerData?.SocialLink &&
            footerData?.SocialLink.map((link: any) => {
              const iconUrl = link.icon ? getUrlImage(link.icon) : null;
              return (
                <a
                  class="size-10 bg-primary-text/20 p-2 rounded-full"
                  href={link.url || '#'}
                  target="_blank"
                  rel="noopener noreferrer"
                  set:html={link.iconSvg ? link.iconSvg : ''}
                >
                  {iconUrl && (
                    <Image
                      src={iconUrl}
                      alt={link.name || 'Social Icon'}
                      width={40}
                      height={40}
                      class="w-full h-full object-contain"
                    />
                  )}
                </a>
              );
            })
        }
      </div>
    </div>
  </div>
</footer>
