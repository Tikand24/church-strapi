---
import { Image } from 'astro:assets';

interface Props {
  title: string;
  description?: string;
  image?: {
    url: string;
    alternativeText: string;
  };
  link?: {
    link?: string;
    text: string;
  };
}

const STRAPI_URL = import.meta.env.STRAPI_URL || 'http://localhost:1337';

const { title, description, image, link } = Astro.props;

const imageUrl = image?.url?.startsWith('http')
  ? image.url
  : `${STRAPI_URL}${image?.url || ''}`;
---

<section
  class="w-full px-4 md:px-20 lg:px-40 py-3 relative flex flex-col items-center justify-center h-full min-h-[400px] sm:min-h-[500px] md:min-h-[600px] max-h-[65vh]"
>
  <div
    class="flex flex-col items-center justify-center text-center gap-3 sm:gap-4 md:gap-6 py-12 sm:py-16 md:py-20 w-full sm:w-4/5 md:w-3/4 lg:w-2/3 xl:w-1/2 z-10 px-4"
  >
    <h1
      class="text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black leading-tight tracking-tight"
    >
      {title}
    </h1>
    <p class="text-sm sm:text-base md:text-lg lg:text-xl text-white max-w-3xl italic line-clamp-3 sm:line-clamp-4">
      {description}
    </p>
    {
      link && (
        <a
          href={link?.link ?? '#'}
          class="mt-2 sm:mt-4 md:mt-6 flex min-w-[120px] cursor-pointer items-center justify-center rounded-lg h-10 sm:h-11 md:h-12 px-4 sm:px-5 md:px-6 bg-primary text-white text-xs sm:text-sm md:text-base font-bold shadow-md hover:bg-primary/90 hover:scale-105 md:hover:scale-110 transition-all active:scale-95"
        >
          <span class="truncate">{link.text}</span>
        </a>
      )
    }
  </div>
  <div
    class="absolute top-0 left-0 w-full h-full px-4 md:px-20 lg:px-40 pb-10 py-3"
  >
    {image?.url && (
      <Image
        src={imageUrl}
        alt={image?.alternativeText || 'Hero background'}
        width={1920}
        height={1080}
        class="w-full rounded-lg shadow-lg h-full brightness-50 object-cover object-center"
      />
    )}
  </div>
</section>
